<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>[[${application.const.PROJECT_NAME}]]([[${application.const.PROJECT_VERSON}]])</title>
        <link th:href="@{/assets/plugins/sweetalert/dist/sweetalert.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/core.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/icons.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/components.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/pages.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/menu.css}" rel="stylesheet" type="text/css">
        <link th:href="@{/assets/css/responsive.css}" rel="stylesheet" type="text/css">
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js}"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js}"></script>
        <![endif]-->
     	<!-- jQuery  -->
        <script th:src="@{/assets/js/jquery.min.js}"></script>
        <script th:src="@{/assets/js/bootstrap.min.js}"></script>
		
		<script type="text/javascript" th:src="@{/plugins/layer/layer.js}"></script>

				
		<script type="text/javascript" th:inline="javascript"> 
		 	var webroot = "[(@{/})]";
		</script>
    </head>
    
    <body>
		<!--  content -->
		<div class="content">
			<div class="container" id="container">
				<div class="row">
					<div class="col-sm-12">
						<form class="form-horizontal" id="creatorForm" name="creatorForm" role="form" th:action="@{/wj_question/add}"  method="post" >    
							<input type="hidden" name="SesToken" th:value="${session.SesToken }"/>
							<div class="panel panel-default m-t-10">
								<div class="panel-body">
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题库类型编号</label>
										<div class="col-md-10">
											<input id="oid" name="oid" maxlength="12"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题目内容</label>
										<div class="col-md-10">
											<input id="content" name="content" maxlength="50"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题目类型</label>
										<div class="col-md-10">
											<input id="qtype" name="qtype" maxlength="12"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题目序号</label>
										<div class="col-md-10">
											<input id="seq" name="seq" maxlength="12"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题目备注</label>
										<div class="col-md-10">
											<input id="remark" name="remark" maxlength="12"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 题目分数</label>
										<div class="col-md-10">
											<input id="score" name="score" maxlength="12"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-2 control-label"><font color="red">*</font> 正确答案</label>
										<div class="col-md-10">
											<input id="rightvalue" name="rightvalue" maxlength="7"  required="" class="form-control"  type="text">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-2 control-label"></label>
										<div class="col-sm-10">
											<button type="button" id="btn-submit" class="btn  btn-primary waves-effect waves-light"><i class="md md-add "> </i>保 存</button>
										</div>
									</div>
 								</div> <!-- panel-body -->
							</div> <!-- panel -->
						</form>
					</div> <!-- col -->
				</div> <!-- row -->
			</div> <!-- container -->
		</div> <!-- content -->
		<script type="text/javascript" th:inline="javascript"> 
			$('#btn-submit').on('click', function(){
				$("#oid").val($.trim( $("#oid").val() ));
				if( $("#oid").val() == "" ){
					layer.msg("错误：题库类型编号不能为空!",function(){
						$("#oid").focus();
					});
					return false;
				}
				
				$("#content").val($.trim( $("#content").val() ));
				if( $("#content").val() == "" ){
					layer.msg("错误：题目内容不能为空!",function(){
						$("#content").focus();
					});
					return false;
				}
				
				$("#qtype").val($.trim( $("#qtype").val() ));
				if( $("#qtype").val() == "" ){
					layer.msg("错误：题目类型不能为空!",function(){
						$("#qtype").focus();
					});
					return false;
				}
				
				$("#seq").val($.trim( $("#seq").val() ));
				if( $("#seq").val() == "" ){
					layer.msg("错误：题目序号不能为空!",function(){
						$("#seq").focus();
					});
					return false;
				}
				
				$("#remark").val($.trim( $("#remark").val() ));
				if( $("#remark").val() == "" ){
					layer.msg("错误：题目备注不能为空!",function(){
						$("#remark").focus();
					});
					return false;
				}
				
				$("#score").val($.trim( $("#score").val() ));
				if( $("#score").val() == "" ){
					layer.msg("错误：题目分数不能为空!",function(){
						$("#score").focus();
					});
					return false;
				}
				
				$("#rightvalue").val($.trim( $("#rightvalue").val() ));
				if( $("#rightvalue").val() == "" ){
					layer.msg("错误：正确答案不能为空!",function(){
						$("#rightvalue").focus();
					});
					return false;
				}
				
				submitForm();	
			});

			function submitForm(){
				$("#btn-submit").addClass("disabled");
				$("#btn-submit").attr("disabled","disabled");
				$.post(document.creatorForm.action, $("#creatorForm").serialize(), function(data) {
					if(data.status == "ok"){
						layer.msg("添加成功!", {icon: 6},function(){
							parent.location.href="[(@{/wj_question/listUnCommit})]";
						});
					}else if(data.status == "error"){
						$("#btn-submit").removeClass("disabled");
						$("#btn-submit").removeAttr("disabled");
						layer.msg('添加失败:' + data.msg ,function(){
     	        			 
						});
					}
				});	
			}
		</script>
	</body>
</html>